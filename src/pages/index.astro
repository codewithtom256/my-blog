---
import BaseLayout from "../layouts/BaseLayout.astro";

import Avatar from "../assets/images/avatar.png";

import Image from "astro/components/Image.astro";

import PreviewCard from "../components/PreviewCard.astro";
import Section from "../components/Section.astro";
import PreviewCardSmall from "../components/PreviewCardSmall.astro";
import ContactForm from "../components/ContactForm.astro";

const pageTitle = "Home";

const lastProjects = Object.values(
  import.meta.glob("./projects/*.md", { eager: true })
).slice(-4);

const lastPosts = Object.values(
  import.meta.glob("./posts/*.md", { eager: true })
).slice(-4);

const testimonials = Object.values(
  import.meta.glob("./testimonials/*.md", { eager: true })
).slice(-3);
---

<BaseLayout pageTitle={pageTitle}>
  <section class="my-8">
    <div class="flex items-center space-x-4">
      <div
        class="h-20 w-20 rounded-full overflow-hidden border border-base-300 bg-primary"
      >
        <Image
          class="object-center object-scale-down"
          src={Avatar}
          alt="Avatar"
        />
      </div>
      <div>
        <h1 class="font-bold text-2xl leading-none">Thomas N.</h1>
        <h2 class="font-semibold text-md">Generalist developer & 3D artist</h2>
      </div>
    </div>
    <div class="text-sm font-semibold mt-4">
      Hey, welcome to my lab! ğŸš€ I craft web experiences from front to back,
      bring ideas to life in 3D, and share my journey through blogs and
      tutorials right here. I love exploring new tech, building creative
      projects, and helping others learn along the way. Check out my latest work
      and letâ€™s create something awesome together! âœ¨ğŸ§‘â€ğŸ’»ğŸ®ğŸ§ª
    </div>
    <div class="mt-4 space-y-1">
      <h3 class="text-sm font-semibold leading-none">
        Email <span
          class="ml-1 badge badge-sm leading-none border border-base-300 bg-primary"
          >thomas.ndi.pro@icloud.com</span
        >
      </h3>
      <h3 class="text-sm font-semibold leading-none">
        Discord <span
          class="ml-1 badge badge-sm leading-none border border-base-300 bg-primary"
          >code.with.tom</span
        >
      </h3>
    </div>
  </section>

  <hr class="my-8 border-base-300" />

  <Section
    title="Latest Creations"
    description="Fresh from the lab: my newest digital builds and creative experiments. Dive in and get inspired!"
    seeAllLink="/projects"
  >
    <div class="grid grid-cols-2 gap-4 mt-8">
      {
        lastProjects.map((post: any) => (
          <PreviewCard
            link={post.url}
            previewImage={post.frontmatter.image}
            title={post.frontmatter.title}
            description={post.frontmatter.description}
            date={post.frontmatter.pubDate}
            tag={post.frontmatter.tags[0]}
          />
        ))
      }
    </div>
  </Section>

  <hr class="my-8 border-base-300" />

  <Section
    title="Latest Articles"
    description="Explore my freshest blog postsâ€”insights, tutorials, and stories from my journey in tech and creativity."
    seeAllLink="/blog"
  >
    <div class="grid grid-cols-2 gap-4 mt-8">
      {
        lastPosts.map((post: any) => (
          <PreviewCard
            link={post.url}
            previewImage={post.frontmatter.image}
            title={post.frontmatter.title}
            description={post.frontmatter.description}
            date={post.frontmatter.pubDate}
            tag={post.frontmatter.tags[0]}
          />
        ))
      }
    </div>
  </Section>

  <hr class="my-8 border-base-300" />

  <Section
    title="Kind Words & Kudos"
    description="A few highlights from awesome people Iâ€™ve teamed up withâ€”honest thoughts, cool stories, and a sprinkle of good vibes."
    seeAllLink="/testimonials"
  >
    <div class="grid grid-cols-3 gap-4 mt-8">
      {
        testimonials.map((testimonal: any) => (
          <PreviewCardSmall
            link={testimonal.url}
            avatar={testimonal.frontmatter.avatar}
            author={testimonal.frontmatter.author}
            company={testimonal.frontmatter.company}
            message={testimonal.frontmatter.messagePreview}
          />
        ))
      }
    </div>
  </Section>

  <hr class="my-8 border-base-300" />

  <Section
    title="Let's Build Something Epic Together"
    description="Drop me a message and let's turn your ideas into realityâ€”whether it's code, design, or something wild. I'm always up for new adventures!"
  >
    <ContactForm />
  </Section>
</BaseLayout>
